import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as a,f as e}from"./app-VKLC1A-x.js";const p={},t=e(`<h1 id="递归" tabindex="-1"><a class="header-anchor" href="#递归" aria-hidden="true">#</a> 递归</h1><h2 id="递归查询" tabindex="-1"><a class="header-anchor" href="#递归查询" aria-hidden="true">#</a> 递归查询</h2><p>递归查询的关键字是：<code>CONNECT BY PRIOR</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 向下级查找</span>
<span class="token keyword">SELECT</span> T<span class="token punctuation">.</span>ENAME<span class="token punctuation">,</span> T<span class="token punctuation">.</span>EMPNO<span class="token punctuation">,</span> T<span class="token punctuation">.</span>MGR
	  <span class="token punctuation">,</span><span class="token keyword">LEVEL</span>  <span class="token comment">-- LEVEL 显示递归中的层级</span>
      <span class="token punctuation">,</span>SYS_CONNECT_BY_PATH<span class="token punctuation">(</span>T<span class="token punctuation">.</span>ENAME<span class="token punctuation">,</span> <span class="token string">&#39;-&gt;&#39;</span><span class="token punctuation">)</span>  <span class="token comment">-- 各层级之间如何连接</span>
<span class="token keyword">FROM</span> EMP T
<span class="token keyword">START</span> <span class="token keyword">WITH</span> T<span class="token punctuation">.</span>EMPNO <span class="token operator">=</span> <span class="token number">7566</span>  <span class="token comment">-- 表示从哪些数据开始找</span>
<span class="token comment">-- 靠近 PRIOR 的字段是 EMPNO，就是往下级查找</span>
<span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> PRIOR T<span class="token punctuation">.</span>EMPNO <span class="token operator">=</span> T<span class="token punctuation">.</span>MGR<span class="token punctuation">;</span>

<span class="token comment">-- 向上级查找</span>
<span class="token keyword">SELECT</span> T<span class="token punctuation">.</span>ENAME<span class="token punctuation">,</span> T<span class="token punctuation">.</span>EMPNO<span class="token punctuation">,</span> T<span class="token punctuation">.</span>MGR
      <span class="token punctuation">,</span>SYS_CONNECT_BY_PATH<span class="token punctuation">(</span>T<span class="token punctuation">.</span>ENAME<span class="token punctuation">,</span> <span class="token string">&#39;-&gt;&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> EMP T
<span class="token keyword">START</span> <span class="token keyword">WITH</span> T<span class="token punctuation">.</span>EMPNO <span class="token operator">=</span> <span class="token number">7566</span>
<span class="token comment">-- 靠近 PRIOR 的字段是 MGR，就是往上级查找</span>
<span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> PRIOR T<span class="token punctuation">.</span>MGR <span class="token operator">=</span> T<span class="token punctuation">.</span>EMPNO<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="递归的应用" tabindex="-1"><a class="header-anchor" href="#递归的应用" aria-hidden="true">#</a> 递归的应用</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 生成 1-10 的结果集</span>
<span class="token keyword">SELECT</span> <span class="token keyword">LEVEL</span>
<span class="token keyword">FROM</span> DUAL
<span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">LEVEL</span> <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">-- 生成 20-27 号每天的日期</span>
<span class="token keyword">SELECT</span> <span class="token keyword">LEVEL</span>
      <span class="token punctuation">,</span><span class="token keyword">LEVEL</span> <span class="token operator">+</span> T<span class="token punctuation">.</span>BEGIN_DATE <span class="token operator">-</span> <span class="token number">1</span>
<span class="token keyword">FROM</span> <span class="token punctuation">(</span>
      <span class="token keyword">SELECT</span> TO_DATE<span class="token punctuation">(</span><span class="token number">20211220</span><span class="token punctuation">,</span> <span class="token string">&#39;YYYYMMDD&#39;</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> BEGIN_DATE
            <span class="token punctuation">,</span>TO_DATE<span class="token punctuation">(</span><span class="token number">20211227</span><span class="token punctuation">,</span> <span class="token string">&#39;YYYYMMDD&#39;</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> END_DATE
      <span class="token keyword">FROM</span> DUAL
     <span class="token punctuation">)</span> T
<span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">LEVEL</span> <span class="token operator">&lt;=</span> T<span class="token punctuation">.</span>END_DATE <span class="token operator">-</span> T<span class="token punctuation">.</span>BEGIN_DATE <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),o=[t];function c(l,i){return s(),a("div",null,o)}const d=n(p,[["render",c],["__file","11_递归.html.vue"]]);export{d as default};
