import{_ as s}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as n,c as a,f as e}from"./app-VKLC1A-x.js";const p={},o=e(`<h1 id="表结构的维护" tabindex="-1"><a class="header-anchor" href="#表结构的维护" aria-hidden="true">#</a> 表结构的维护</h1><h2 id="表字段的增删改" tabindex="-1"><a class="header-anchor" href="#表字段的增删改" aria-hidden="true">#</a> 表字段的增删改</h2><h3 id="修改字段的长度" tabindex="-1"><a class="header-anchor" href="#修改字段的长度" aria-hidden="true">#</a> 修改字段的长度</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> <span class="token punctuation">(</span>EMPNO NUMBER<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="修改字段的类型" tabindex="-1"><a class="header-anchor" href="#修改字段的类型" aria-hidden="true">#</a> 修改字段的类型</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> <span class="token punctuation">(</span>SAL VARCHAR2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><em><strong>注</strong></em>：被修改的字段，对应的值应全为<code>NULL</code>，即，修改字段的数据类型时，需要先将该字段的数据清空</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> <span class="token punctuation">(</span>SAL VARCHAR2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 报错，要先清空字段</span>
<span class="token keyword">UPDATE</span> EMP_BAK <span class="token keyword">SET</span> SAL <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>  <span class="token comment">-- 清空数据</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> <span class="token punctuation">(</span>SAL VARCHAR2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 清空数据之后，就可以修改字段类型</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="增加和删除表的字段" tabindex="-1"><a class="header-anchor" href="#增加和删除表的字段" aria-hidden="true">#</a> 增加和删除表的字段</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 增加字段</span>
<span class="token comment">-- ALTER TABLE 表名 ADD 新增字段 数据类型;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">ADD</span> AMOUNT NUMBER<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除字段</span>
<span class="token comment">-- ALTER TABLE 表名 DROP COLUMN 删除字段;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> AMOUNT<span class="token punctuation">;</span>  <span class="token comment">-- 删除字段不用数据类型</span>

<span class="token comment">-- 修改字段的名字</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">RENAME</span> <span class="token keyword">COLUMN</span> 旧字段名 <span class="token keyword">TO</span> 新字段名<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">RENAME</span> <span class="token keyword">COLUMN</span> JOB <span class="token keyword">TO</span> JOB_NEW<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改表名" tabindex="-1"><a class="header-anchor" href="#修改表名" aria-hidden="true">#</a> 修改表名</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> 新表名<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> EMP_BAK_NEW<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="表字段的增删改示例汇总" tabindex="-1"><a class="header-anchor" href="#表字段的增删改示例汇总" aria-hidden="true">#</a> 表字段的增删改示例汇总</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> <span class="token punctuation">(</span>EMPNO NUMBER<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">-- 修改字段长度</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> <span class="token punctuation">(</span>SAL VARCHAR2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">-- 修改字段类型</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">ADD</span> AMOUNT NUMBER<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">-- 增加字段</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> AMOUNT<span class="token punctuation">;</span>            <span class="token comment">-- 删除字段</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">RENAME</span> <span class="token keyword">COLUMN</span> JOB <span class="token keyword">TO</span> JOB_NEW<span class="token punctuation">;</span>  <span class="token comment">-- 修改字段名</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> EMP_BAK_NEW<span class="token punctuation">;</span>         <span class="token comment">-- 修改表名</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="oracle的伪列" tabindex="-1"><a class="header-anchor" href="#oracle的伪列" aria-hidden="true">#</a> Oracle的伪列</h2><h3 id="rownum" tabindex="-1"><a class="header-anchor" href="#rownum" aria-hidden="true">#</a> ROWNUM</h3><p><code>ROWNUM</code>返回数据的行号，常用于分页查询，一般使用<code>&lt;</code>或<code>&lt;=</code>，不能使用大于或大于等于，也不能使用<code>BETWEEN ... AND ...</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> E<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> ROWNUM <span class="token keyword">FROM</span> EMP E <span class="token keyword">WHERE</span> ROWNUM <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment">-- 变相使用大于或大于等于</span>
<span class="token comment">-- 查询EMP表中薪资六-十名的员工信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ROWNUM RN<span class="token punctuation">,</span> E<span class="token punctuation">.</span><span class="token operator">*</span>
      <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> EMP
            <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> SAL <span class="token keyword">DESC</span><span class="token punctuation">)</span> E<span class="token punctuation">)</span> F
<span class="token keyword">WHERE</span> F<span class="token punctuation">.</span>RN <span class="token operator">BETWEEN</span> <span class="token number">6</span> <span class="token operator">AND</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rowid" tabindex="-1"><a class="header-anchor" href="#rowid" aria-hidden="true">#</a> ROWID</h3><p><code>ROWID</code>记录了表数据的物理存储位置，具有唯一性，常用于删除重复数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 删除重复数据</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> EMP_BAK
<span class="token keyword">WHERE</span> ROWID <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span> <span class="token keyword">FROM</span> EMP_BAK
                    <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> EMPNO<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="表的约束" tabindex="-1"><a class="header-anchor" href="#表的约束" aria-hidden="true">#</a> 表的约束</h2><h3 id="主键约束" tabindex="-1"><a class="header-anchor" href="#主键约束" aria-hidden="true">#</a> 主键约束</h3><p>主键约束要求具有唯一性，且不能为空</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 设置主键，要求数据不能重复，且不能为空</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 主键名称 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> PK_EMPNO <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>EMPNO<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除主键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> 主键名称<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> PK_EMPNO<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="唯一约束" tabindex="-1"><a class="header-anchor" href="#唯一约束" aria-hidden="true">#</a> 唯一约束</h3><p>唯一约束数据可以为空，但是必须具有唯一性</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 设置唯一约束，要求数据不能重复，可以有多个空值，空值不用于重复判断</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 唯一约束名称 <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> UN_ENAME <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>ENAME<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除唯一约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> 唯一约束名称<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> UN_ENAME<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="检查约束" tabindex="-1"><a class="header-anchor" href="#检查约束" aria-hidden="true">#</a> 检查约束</h3><p>对添加的数据做检查，需要满足约束条件</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 设置检查约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 约束名 <span class="token keyword">CHECK</span><span class="token punctuation">(</span>条件<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> STUDENT <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> GENDER_CHECK <span class="token keyword">CHECK</span><span class="token punctuation">(</span>GENDER <span class="token operator">=</span> <span class="token string">&#39;男&#39;</span> <span class="token operator">OR</span> GENDER <span class="token operator">=</span> <span class="token string">&#39;女&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除检查约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> 约束名<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> STUDENT <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> GENDER_CHECK<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="非空约束" tabindex="-1"><a class="header-anchor" href="#非空约束" aria-hidden="true">#</a> 非空约束</h3><p>非空约束数据可以重复，但是不能为空</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 设置非空约束，要求数据中没有空值</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> JOB <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除非空约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> JOB <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="表的约束示例汇总" tabindex="-1"><a class="header-anchor" href="#表的约束示例汇总" aria-hidden="true">#</a> 表的约束示例汇总</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> PK_EMPNO <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>EMPNO<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 设置主键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> UN_ENAME <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>ENAME<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 设置唯一约束</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> PK_EMPNO<span class="token punctuation">;</span>  <span class="token comment">-- 删除主键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> UN_ENAME<span class="token punctuation">;</span>  <span class="token comment">-- 删除唯一约束</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> STUDENT <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> GENDER_CHECK <span class="token keyword">CHECK</span><span class="token punctuation">(</span>GENDER <span class="token operator">=</span> <span class="token string">&#39;男&#39;</span> <span class="token operator">OR</span> GENDER <span class="token operator">=</span> <span class="token string">&#39;女&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> STUDENT <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> GENDER_CHECK<span class="token punctuation">;</span>  <span class="token comment">-- 删除检查约束</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> JOB <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>  <span class="token comment">-- 设置非空约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> EMP_BAK <span class="token keyword">MODIFY</span> JOB <span class="token boolean">NULL</span><span class="token punctuation">;</span>  <span class="token comment">-- 删除非空约束</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,36),t=[o];function c(l,d){return n(),a("div",null,t)}const r=s(p,[["render",c],["__file","05_表结构的维护.html.vue"]]);export{r as default};
